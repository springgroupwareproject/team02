<!DOCTYPE html>
<html class="no-js" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/main">
	
	<th:block layout:fragment="customHead">
		<meta charset="UTF-8">
		<title>공통 문서양식 관리</title>
		<th:block th:include="layout/customHead"></th:block>
		<link rel="stylesheet" th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css}">
		<script th:src="@{https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js}"></script>
		<script>
			$(document).ready(function() {
				// 카테고리별 문서양식 목록
				$('.documentFormCategory a').click(function() {
					console.log('#documentFormCategory click');
					//비동기 요청
					$.ajax({
						url:'/getDocumentForm'
							, type:'GET'
							, data : {documentFormCategoryCode : $(this).attr("value")}
				            , success:function(data) {
				            	console.log(data);
				            	$('#documentFormList').empty();
				                $(data).each(function(i,item){
				                    $('#documentFormList').append('<tr>');
				                    $('#documentFormList').append('<td><input type="checkbox" class="ck" value="'+item.documentFormCategoryCode+'"></td>');
				                    $('#documentFormList').append('<td>'+item.documentFormCategoryName+'</td>');
				                    $('#documentFormList').append('<td>'+item.documentFormName+'</td>');
				                    $('#documentFormList').append('<td>'+item.documentFormDate+'</td>');
				                    $('#documentFormList').append('</tr>');
				        	   	});
				            }
					});
		
				});
						
			});
		</script>
	</th:block>
	
	<th:block layout:fragment="customBody">
		<body>
			<div class="container">
			<h1>공통문서양식 관리</h1>
				<table>
					<tr th:each="list : ${list}">
						<td class = "documentFormCategory">
							<a th:value="${list.documentFormCategoryCode}" href="#">
								<th:block th:text="${list.documentFormCategoryName}"></th:block>
							</a>
						</td>
					</tr>
				</table>
			</div>
			<div class="container">
				<table border="1">
					<thead>
			            <tr>
			                <th></th>
			                <th>문서 카테고리</th>
			                <th>제목</th>
			                <th>등록일</th>
			            </tr>
			        </thead>
					<tbody id="documentFormList">
			        </tbody>
				</table>
			</div>
		</body>
	</th:block>
	
	<th:block layout:fragment="customJquery">
		<th:block th:include="layout/customJquery"></th:block>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	</th:block>
	
</html>
